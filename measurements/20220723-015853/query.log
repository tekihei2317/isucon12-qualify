make[1]: Entering directory '/home/isucon/webapp'
sudo pt-query-digest /var/log/mysql/mysql-slow.log

# 990ms user time, 30ms system time, 29.26M rss, 35.01M vsz
# Current date: Sat Jul 23 01:58:54 2022
# Hostname: ip-192-168-0-11
# Files: /var/log/mysql/mysql-slow.log
# Overall: 12.14k total, 13 unique, 144.58 QPS, 2.48x concurrency ________
# Time range: 2022-07-23T01:53:22 to 2022-07-23T01:54:46
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           208s     2us      3s    17ms    65ms    45ms     8ms
# Lock time            32s       0    71ms     3ms    12ms     4ms     1us
# Rows sent        111.38k       0     199    9.39   72.65   30.52       0
# Rows examine      28.76M       0   3.08M   2.43k  15.96k  29.07k       0
# Query size       733.75k      27     157   61.87  143.84   35.75   44.60

# Profile
# Rank Query ID                       Response time  Calls R/Call V/M   It
# ==== ============================== ============== ===== ====== ===== ==
#    1 0x676347F321DB8BC7FCB05D494... 118.4026 56.9%  1369 0.0865  0.08 SELECT visit_history
#    2 0x94A9E43DFAAFA029A1FC19A55...  81.3642 39.1%  7899 0.0103  0.00 REPLACE id_generator
# MISC 0xMISC                           8.3914  4.0%  2877 0.0029   0.0 <11 ITEMS>

# Query 1: 17.11 QPS, 1.48x concurrency, ID 0x676347F321DB8BC7FCB05D4948FC2248 at byte 1752849
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.08
# Time range: 2022-07-23T01:53:26 to 2022-07-23T01:54:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         11    1369
# Exec time     56    118s   171us   574ms    86ms   253ms    82ms    56ms
# Lock time      0     3ms     1us   309us     2us     2us     8us     1us
# Rows sent     97 108.25k       0     199   80.97  174.84   51.88   62.76
# Rows examine  89  25.69M       0  49.19k  19.21k  49.01k  13.22k  13.78k
# Query size    26 191.13k     141     144  142.97  136.99    0.71  136.99
# String:
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##
#   1ms  #####
#  10ms  ################################################################
# 100ms  #############################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'visit_history'\G
#    SHOW CREATE TABLE `visit_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT player_id, MIN(created_at) AS min_created_at FROM visit_history WHERE tenant_id = 45 AND competition_id = '62a18ebb6' GROUP BY player_id\G

# Query 2: 103.93 QPS, 1.07x concurrency, ID 0x94A9E43DFAAFA029A1FC19A5563AD0F5 at byte 199571
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-23T01:53:26 to 2022-07-23T01:54:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         65    7899
# Exec time     39     81s     2ms    76ms    10ms    21ms     5ms     9ms
# Lock time     99     32s     1us    71ms     4ms    14ms     5ms     2ms
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    47 347.12k      45      45      45      45       0      45
# String:
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #####################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'id_generator'\G
#    SHOW CREATE TABLE `id_generator`\G
REPLACE INTO id_generator (stub) VALUES ('a')\G
make[1]: Leaving directory '/home/isucon/webapp'
